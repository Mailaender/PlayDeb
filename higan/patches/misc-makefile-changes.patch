Description: Various changes to the upstream makefiles

* Don't strip binaries in Makefile.
* Install in /usr/games, not /usr/bin.
* Install cheats.bml into /usr/share/games/bsnes/, not ~/.config/bsnes.
* Name bsnes.png and bsnes.desktop explicitly.
* Include ALSA audio backend only on Linux.

Origin: http://anonscm.debian.org/gitweb/?p=pkg-games/bsnes.git;a=tree;f=debian/patches

Index: higan-094/ananke/Makefile
===================================================================
--- higan-094.orig/ananke/Makefile	2014-02-26 18:52:41.446232525 +0100
+++ higan-094/ananke/Makefile	2014-02-26 18:52:41.438232525 +0100
@@ -2,7 +2,7 @@
 include ../phoenix/Makefile
 
 path := /usr/local/lib
-flags := $(flags) -O3 -fomit-frame-pointer -I..
+flags := $(flags) $(CFLAGS) $(CPPFLAGS) -I..
 
 all:
 	$(compiler) $(cppflags) $(flags) -fPIC -o obj/ananke.o -c ananke.cpp
Index: higan-094/Makefile
===================================================================
--- higan-094.orig/Makefile	2014-02-26 18:52:41.446232525 +0100
+++ higan-094/Makefile	2014-02-26 18:56:17.062230685 +0100
@@ -13,8 +13,8 @@
 # console := true
 
 # compiler
-flags   += -I. -O3 -fomit-frame-pointer
-link    +=
+flags   := -I. $(CFLAGS) $(CPPFLAGS)
+link    := $(LDFLAGS)
 objects := libco
 
 # profile-guided optimization mode
@@ -44,8 +44,8 @@
 else ifeq ($(platform),macosx)
   flags += -march=native
 else ifeq ($(platform),linux)
-  flags += -march=native
-  link += -s -Wl,-export-dynamic -lX11 -lXext -ldl
+  #flags += -march=native
+  link += -Wl,-export-dynamic -lX11 -lXext -ldl
 else ifeq ($(platform),bsd)
   flags += -march=native
   link += -s -Wl,-export-dynamic -lX11 -lXext
Index: higan-094/target-ethos/Makefile
===================================================================
--- higan-094.orig/target-ethos/Makefile	2014-02-26 18:52:41.446232525 +0100
+++ higan-094/target-ethos/Makefile	2014-02-26 18:55:07.098231282 +0100
@@ -24,8 +24,11 @@
   ruby += input.carbon
 else ifeq ($(platform),linux)
   ruby := video.glx video.xv video.xshm video.sdl
-  ruby += audio.alsa audio.openal audio.oss audio.pulseaudio audio.pulseaudiosimple audio.ao
+  ruby += audio.openal audio.oss audio.pulseaudio audio.pulseaudiosimple audio.ao
   ruby += input.udev input.sdl input.x
+  ifneq ($(findstring Linux,$(uname)),)
+    ruby += audio.alsa
+  endif
 else ifeq ($(platform),bsd)
   ruby := video.glx
   ruby += audio.openal audio.oss
@@ -96,14 +99,11 @@
 	sudo cp data/cheats.bml /Library/Application\ Support/$(name)/cheats.bml
 	sudo chmod -R 777 /Library/Application\ Support/$(name)
 else
-	sudo install -D -m 755 out/$(name) $(DESTDIR)$(prefix)/bin/$(name)
-	sudo install -D -m 644 data/$(name).png $(DESTDIR)$(prefix)/share/pixmaps/$(name).png
-	sudo install -D -m 644 data/$(name).desktop $(DESTDIR)$(prefix)/share/applications/$(name).desktop
-
-	sudo mkdir -p /usr/share/$(name)
-	sudo cp -R profile/* /usr/share/$(name)
-	sudo cp data/cheats.bml /usr/share/$(name)/cheats.bml
-	sudo chmod -R 777 /usr/share/$(name)
+	install -D -m 755 out/$(name) $(DESTDIR)$(prefix)/games/$(name)
+	install -D -m 644 data/higan.png $(DESTDIR)$(prefix)/share/pixmaps/higan.png
+	install -D -m 644 data/higan.desktop $(DESTDIR)$(prefix)/share/applications/higan.desktop
+	install -D -m 644 data/cheats.xml $(DESTDIR)$(prefix)/share/games/higan/cheats.xml
+	cp -R profile/* $(DESTDIR)$(prefix)/share/games/higan/profile/
 endif
 
 uninstall:
