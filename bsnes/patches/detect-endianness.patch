Description: Detect endianness using endian.h
 Upstream bsnes knows the endianess only for a few architectures and otherwise FTBFS.
Origin: http://anonscm.debian.org/gitweb/?p=pkg-games/bsnes.git;a=tree;f=debian/patches

Index: bsnes-090/bsnes/nall/intrinsics.hpp
===================================================================
--- bsnes-090.orig/bsnes/nall/intrinsics.hpp	2012-08-06 22:51:07.000000000 +0200
+++ bsnes-090/bsnes/nall/intrinsics.hpp	2012-08-07 18:15:51.387683177 +0200
@@ -1,6 +1,8 @@
 #ifndef NALL_INTRINSICS_HPP
 #define NALL_INTRINSICS_HPP
 
+#include <endian.h>
+
 struct Intrinsics {
   enum class Compiler : unsigned { GCC, VisualC, Unknown };
   enum class Platform : unsigned { X, OSX, Windows, Unknown };
@@ -45,11 +47,11 @@
 
 /* Endian detection */
 
-#if defined(__i386__) || defined(__amd64__) || defined(_M_IX86) || defined(_M_AMD64)
+#if __BYTE_ORDER == __LITTLE_ENDIAN
   #define ENDIAN_LSB
   #define ARCH_LSB
   Intrinsics::Endian Intrinsics::endian() { return Intrinsics::Endian::LSB; }
-#elif defined(__powerpc__) || defined(_M_PPC) || defined(__BIG_ENDIAN__)
+#elif __BYTE_ORDER == __BIG_ENDIAN
   #define ENDIAN_MSB
   #define ARCH_MSB
   Intrinsics::Endian Intrinsics::endian() { return Intrinsics::Endian::MSB; }
Index: bsnes-090/kaijuu/nall/intrinsics.hpp
===================================================================
--- bsnes-090.orig/kaijuu/nall/intrinsics.hpp	2012-07-29 15:08:30.000000000 +0200
+++ bsnes-090/kaijuu/nall/intrinsics.hpp	2012-08-07 18:15:48.347683203 +0200
@@ -1,6 +1,8 @@
 #ifndef NALL_INTRINSICS_HPP
 #define NALL_INTRINSICS_HPP
 
+#include <endian.h>
+
 struct Intrinsics {
   enum class Compiler : unsigned { GCC, VisualC, Unknown };
   enum class Platform : unsigned { X, OSX, Windows, Unknown };
@@ -45,11 +47,11 @@
 
 /* Endian detection */
 
-#if defined(__i386__) || defined(__amd64__) || defined(_M_IX86) || defined(_M_AMD64)
+#if __BYTE_ORDER == __LITTLE_ENDIAN
   #define ENDIAN_LSB
   #define ARCH_LSB
   Intrinsics::Endian Intrinsics::endian() { return Intrinsics::Endian::LSB; }
-#elif defined(__powerpc__) || defined(_M_PPC) || defined(__BIG_ENDIAN__)
+#elif __BYTE_ORDER == __BIG_ENDIAN
   #define ENDIAN_MSB
   #define ARCH_MSB
   Intrinsics::Endian Intrinsics::endian() { return Intrinsics::Endian::MSB; }
Index: bsnes-090/purify/nall/intrinsics.hpp
===================================================================
--- bsnes-090.orig/purify/nall/intrinsics.hpp	2012-08-06 22:48:56.000000000 +0200
+++ bsnes-090/purify/nall/intrinsics.hpp	2012-08-07 18:15:50.079683188 +0200
@@ -1,6 +1,8 @@
 #ifndef NALL_INTRINSICS_HPP
 #define NALL_INTRINSICS_HPP
 
+#include <endian.h>
+
 struct Intrinsics {
   enum class Compiler : unsigned { GCC, VisualC, Unknown };
   enum class Platform : unsigned { X, OSX, Windows, Unknown };
@@ -45,11 +47,11 @@
 
 /* Endian detection */
 
-#if defined(__i386__) || defined(__amd64__) || defined(_M_IX86) || defined(_M_AMD64)
+#if __BYTE_ORDER == __LITTLE_ENDIAN
   #define ENDIAN_LSB
   #define ARCH_LSB
   Intrinsics::Endian Intrinsics::endian() { return Intrinsics::Endian::LSB; }
-#elif defined(__powerpc__) || defined(_M_PPC) || defined(__BIG_ENDIAN__)
+#elif __BYTE_ORDER == __BIG_ENDIAN
   #define ENDIAN_MSB
   #define ARCH_MSB
   Intrinsics::Endian Intrinsics::endian() { return Intrinsics::Endian::MSB; }
