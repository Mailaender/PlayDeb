#!/usr/bin/make -f
%:
	dh $@ --parallel

override_dh_auto_clean:
	dh_auto_clean
	find . -type d -name CMakeFiles -exec rm -rf {} \; || /bin/true
	find . -type f -name cmake_install.cmake -delete
	find . -type f -name Makefile -delete
	find . -type f -name install_manifest.txt -delete
	find . -type f -name CMakeCache.txt -delete
	rm -f Docs/Doxyfile bin/plugins.cfg bin/resources.xml pkgconfig/MYGUI.pc

override_dh_auto_configure:
	PKG_CONFIG_PATH=${PKG_CONFIG_PATH}:/usr/lib/OGRE1.8/pkgconfig/ cmake . \
	 -DCMAKE_INSTALL_PREFIX=/usr -DMYGUI_PLUGIN_DIR="/etc/OGRE1.8/" \
	 -DCMAKE_SHARED_LINKER_FLAGS="-ldl -Wl,--as-needed" -DCMAKE_CXX_FLAGS_RELWITHDEBINFO="-O2 -g" \
	 -DCMAKE_BUILD_TYPE="RelWithDebInfo" -DCMAKE_SKIP_RPATH=ON -DMYGUI_BUILD_SAMPLES=FALSE \
	 -DMYGUI_INSTALL_TOOLS=FALSE -DMYGUI_INSTALL_DOCS=OFF

override_dh_auto_install:
	dh_auto_install

override_dh_install:
	dh_install --fail-missing

override_dh_installchangelogs:
	dh_installchangelogs ChangeLog.txt

override_dh_strip:
	dh_strip -plibmygui3 --dbg-package=libmygui3-dbg
